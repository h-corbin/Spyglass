<body>
    <div class="container col-md-4">
        <form class="form-group">
            <div class="alert alert-warning" *ngIf='invalidLogin'>Invalid username and password.</div>
            <div class="alert alert-success" *ngIf='registerSuccess'>New acount has been created. Please login to continue.</div>
            <div class="form-group">
                <input type="text" class="form-control" id="username" [(ngModel)]="username" placeholder="Username"
                    name="username">
            </div>
            <div class="form-group row">
                <div id="inputPass1">
                    <input matInput class="form-control" [type]="showPassword ? 'text' : 'password'" name="password" placeholder="Password" [(ngModel)]="password">
                </div>
                <div id="iconPass1">
                    <mat-icon matSuffix (click)="togglePasswordVisibility()">
                        {{showPassword?'visibility_off':'visibility'}}
                    </mat-icon>
                </div>
            </div>
        </form>
        <div class="button">
            <button (click)=login() class="btn btn-success">Login</button>
        </div>
        <div class="button"> 
            <button class="btn btn-secondary btn-sm" (click)="open(newUserModal)">New User</button> 
        </div>
    </div>
</body>


<ng-template #newUserModal let-modal>
    <div class="modal-header">
        <h2 class="modal-title" id="modal-basic-title">Register a New Account</h2>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')" (click)="close()"></button>
    </div>
    <div class="modal-body">
        <form class="register-form">
            <div class="mb-3">
                <input id="username" class="form-control" placeholder="Username" name="usrnm" type="text" [(ngModel)]=user.username>
            </div>
            <div class="alert alert-warning" *ngIf='invalidUsername'>This username is not available</div>
            
            <div class="mb-3 row">
                <div id="inputPass">
                    <input matInput class="form-control" [type]="showPassword ? 'text' : 'password'" name="password" placeholder="Password" [(ngModel)]=user.password>
                </div>
                <div id="iconPass">
                    <mat-icon matSuffix (click)="togglePasswordVisibility()">
                        {{showPassword?'visibility_off':'visibility'}}
                    </mat-icon>
                </div>
            </div>
            
            <div class="mb-3">
                <input id="firstName" class="form-control" placeholder="First name" name="fname" type="text" [(ngModel)]=user.firstName>
            </div>
            <div class="mb-3">
                <input id="lastName" class="form-control" placeholder="Last name" name="lname" type="text" [(ngModel)]=user.lastName>
            </div>
            <div class="mb-3">
                <input id="email" class="form-control" placeholder="Email address" name="em" type="text" [(ngModel)]=user.email>
            </div>

        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-success" (click)="save()">Sign Up</button>
    </div>
</ng-template>